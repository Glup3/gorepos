{{ define "index" }}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ditto</title>
    <script
      src="https://unpkg.com/htmx.org@2.0.4"
      integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="assets/css/output.css" />
  </head>
  <body>
    <main class="mx-auto max-w-6xl p-4">
      <h1>Ditto</h1>

      <section>
        <div class="flex justify-between items-center">
          <h2>Discover Go Repositories</h2>

          <button
            hx-get="/repos/discover"
            hx-target="#discover"
            hx-swap="innerHTML"
          >
            Discover
          </button>
        </div>
        <div id="discover">{{ template "items" . }}</div>
      </section>
    </main>
  </body>
</html>
{{ end }}

<!-- formatter divider -->

{{ define "items" }}
<div
  class="grid grid-cols-[repeat(auto-fill,minmax(250px,1fr))] grid-rows-auto gap-4"
>
  {{range .}}
  <div class="flex flex-col space-y-2 rounded-lg border-2 border-slate-600 p-2">
    <div class="flex items-center">
      <img
        src="{{ .AvatarURL }}"
        height="32"
        width="32"
        class="mr-2 rounded-full"
      />
      <a
        href="https://github.com/{{ .FullName }}"
        target="_blank"
        rel="_noopener"
        class="font-bold text-blue-600 truncate hover:underline"
      >
        {{ .FullName }}
      </a>
    </div>

    <div class="line-clamp-2 text-sm">{{ .Description }}</div>

    <div class="mt-auto flex items-center gap-4 text-sm">
      <span>
        <span
          class="inline-block rounded-full bg-[#00ADD8] size-3 border-1 border-[#ffffff26]"
        ></span>
        <span>Go</span>
      </span>

      <span>‚≠ê {{ formatStars .StargazersCount }}</span>

      <span class="truncate">{{ .LicenseSpdxID}}</span>
    </div>
  </div>
  {{end}}
</div>
{{end}}
